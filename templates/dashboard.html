<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="static/style.css"> 
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        .donut-charts-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around; /* Adjust this to center or space-between as needed */
        }

        .donut-chart {
            width: 150px;
            height: 150px;
            margin-bottom: 10px; /* Adjust spacing between charts */
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <div class="header">
            <h1>
                <img src="static/assests/logo.png" alt="Logo" class="logo" style="width: 150px; height: 25px;">

            </h1>
            <div class="user-info">
                <!-- <img src="static/assests/user.jpg" alt="User Avatar">
                <span>John Doe</span> -->
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>
        <div class="content">
            <div class="sidebar">
                <a href="/dashboard"><i class="fas fa-home"></i>Overview</a>
                <a href="/benchmark"><i class="fas fa-home"></i>Benchmark Comparison</a>
                <a href="/oboarding"><i class="fas fa-file-alt"></i>Onboarding</a>
                <a href="/quiz"><i class="fas fa-chart-line"></i>Increase confidence</a>
                <a href="/matching"><i class="fas fa-book"></i>Matching</a>
                <a href="/user_profile"><i class="fas fa-user-friends"></i>User Profile</a>
                <a href="/subscription"><i class="fas fa-file-pdf"></i>Subscription</a>
            </div>
            <div class="main-content">
                <div class="dash-content">
                    <iframe src="/dash1/" style="width: 100%; height: 800px; border: none;"></iframe>
                </div>
                <div class="donut-charts-container">
                    <div>
                        <div id="CEO" class="donut-chart"></div>
                        <div id="CSO" class="donut-chart"></div>
                        <div id="CPO" class="donut-chart"></div>
                        <div id="CMO" class="donut-chart"></div>
                    </div>
                    <div>
                        <div id="CFO" class="donut-chart"></div>
                        <div id="CTO" class="donut-chart"></div>
                        <div id="COO" class="donut-chart"></div>
                        <div id="Advisor" class="donut-chart"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        function logout() {
            window.location.href = "/logout";
        }
    </script>
    <script>
        function logout() {
            window.location.href = "/logout";
        }
    </script>
    <script>
        function createDonutChart(id, percentage) {
            var primaryColor = '#11113A';    // Dark Blue
            var secondaryColor = '#E8AFF6';  // Light Purple
            var tertiaryColor = '#AFB0F6';   // Purple
            var colors = [secondaryColor, primaryColor]; // Colors array for low and high percentages
            
            if (percentage > 50) {
                colors = [secondaryColor, primaryColor]; // Blue for lower percentage, orange for higher
            } else {
                colors = [secondaryColor, tertiaryColor]; // Blue for lower percentage, red for higher
            }
            
            var data = [{
                values: [percentage, 100 - percentage],
                labels: ['Percentage', ''],
                type: 'pie',
                hole: .4,
                textinfo: "none",
                marker: {
                    colors: colors
                }
            }];
            
            var layout = {
                title: id,
                showlegend: false,
                annotations: [{
                    font: {
                        size: 20
                    },
                    showarrow: false,
                    text: `${percentage}%`,
                    x: 0.5,
                    y: 0.5
                }],
                margin: { t: 30, b: 0, l: 0, r: 0 },
                plot_bgcolor: 'rgba(0,0,0,0)',  // Transparent background
                paper_bgcolor: 'rgba(0,0,0,0)'  // Transparent background
            };
            
            Plotly.newPlot(id, data, layout);
        }

        var percentages = {
            CEO: 52,
            CSO: 52,
            CPO: 51,
            CMO: 52,
            CFO: 59,
            CTO: 53,
            COO: 54,
            Advisor: 52
        };

        for (const [role, percentage] of Object.entries(percentages)) {
            createDonutChart(role, percentage);
        }
    </script>


</body>
</html>
